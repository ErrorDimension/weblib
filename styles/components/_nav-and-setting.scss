body {
    --nav-height: clamp(40px, 5.25vh, 50px);
}

i {
    position: relative;

    &:before {
        position: absolute;
        top: 50%;
        left: 50%;

        transform: translate(-50%, -50%);
    }
}

.nav {
    position: sticky;
    inset: 0 0 auto 0;

    display: flex;
    place-items: center;
    place-content: center space-between;

    width: 100vw;
    max-width: 100vw;
    height: var(--nav-height);

    background: var(--nav-bg, white);

    z-index: 10;

    box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;

    transition: box-shadow 0.2s ease-out;

    &--left,
    &--right {
        display: flex;

        place-items: center;
        place-content: center;
        height: 100%;
    }

    &__component {
        display: flex;
        flex-direction: row;

        place-items: center;
        place-content: center;
        height: 100%;

        background-color: var(--nav-component-bg, white);
        cursor: pointer;

        transition: all 0.2s ease;

        .nav {
            &__link {
                position: relative;

                display: table;

                width: 3.4em;
                height: 100%;

                text-align: center;

                color: var(--nav-link-bg, var(--flat-color-black));

                transition: background-color 0.2s ease, transform 0.2s ease-out, filter 100ms ease-out;

                * {
                    display: table-cell;
                    vertical-align: middle;

                    max-height: var(--nav-height);

                    font-size: 1.125em;

                    pointer-events: none;
                }

                &:active {
                    background-color: var(--nav-link-bg-hover, #ebebeb);
                    filter: brightness(1.1);
                }

                &:after {
                    content: attr(href);

                    position: absolute;
                    inset: 0;
                }

                &[data-icon="done"]:after {
                    content: none;
                    display: none;
                }
            }

            &__logo {
                display: flex;
                place-items: center;
                place-content: center;

                width: auto;
                height: 100%;

                padding: 0 0.5em;

                background: var(--nav-bg, white);

                user-select: none;

                transition: background-color 0.2s ease, transform 0.2s ease-out;

                &__icon {
                    height: 1.9rem;
                    width: 1.9rem;

                    border-radius: 50%;

                    object-fit: cover;
                    background-position: center;

                    pointer-events: none;
                }

                &__title {
                    padding: 0.12em 0 0 0.4em;

                    font-family: var(--font-secondary);
                    font-weight: bold;
                    font-size: 1rem;
                    color: var(--nav-logo-title-clr, black);

                    pointer-events: none;
                    user-select: none;
                }

                &:active {
                    background-color: var(--nav-link-bg-hover, #ebebeb);
                    transform: scale(0.9);
                }
            }

            &__subwindow {
                display: flex;
                place-content: center;
                place-items: center;

                min-width: 3.4em;
                height: 100%;

                padding: 0 1em;

                img {
                    height: 1.9rem;
                    width: 1.9rem;

                    border-radius: 50%;

                    object-fit: cover;
                    background-position: center;

                    pointer-events: none;
                    user-select: none;
                }

                &__icon {
                    font-size: 1.1em;

                    pointer-events: none;
                    user-select: none;
                }

                &__text {
                    font-weight: bold;
                    font-family: var(--font-secondary);

                    padding-left: 0.5em;

                    pointer-events: none;
                    user-select: none;
                }

                &__container {
                    position: absolute;
                    top: 100%;

                    max-width: 100vw;
                    height: 0;
                    max-height: calc(100vh - var(--nav-height));

                    border-bottom: 5px solid blue;

                    overflow: auto;

                    &--show {
                        height: unset;
                    }
                }

                &:active {
                    filter: brightness(1.15);
                }
            }
        }
    }

    &__indicator {
        position: absolute;
        top: 100%;

        height: 3px;
        width: 0;

        background-color: var(--nav-indicator-bg, var(--flat-color-black));
        box-shadow: 0 0 7px 0.5px var(--nav-indicator-bg, rgba(0, 0, 0, 0.4));

        pointer-events: none;
        z-index: 100;

        transition: width 0.3s ease, all 0.2s cubic-bezier(0.25, 1, 0.5, 1);
    }

    &__tip {
        position: absolute;
        top: 100%;

        padding: 0.5em;

        opacity: 0;

        pointer-events: none;

        transition: all 100ms ease-out;

        &__title {
            font-family: var(--font-secondary);
            font-weight: 900;
            font-size: 18px;
            line-height: 20px;

            pointer-events: none;
        }

        &__des {
            font-family: var(--font-secondary);
            font-size: 14px;
            font-weight: 500;
            margin-block-start: 0.25em;

            pointer-events: none;
        }

        &--active {
            opacity: 1;
        }
    }

    &__window {
        position: absolute;
        top: 100%;
    }

    #nav {
        &-button {
            order: 1;
        }

        &-subwindow {
            order: 2;
        }

        &-hamburger {
            order: 3;
        }
    }

    &--has-tip {
        box-shadow: 0 40px 100px 30px var(--nav-hover-shadow, rgba(255, 255, 255, 90%));
    }
}

.underlay {
    position: fixed;
    inset: var(--top, 0) 0 0 0;

    background-color: hsla(245, 34%, 52%, 0.47);
    backdrop-filter: blur(2px);

    border-top: 11px solid rgb(164, 187, 242);

    pointer-events: none;
    user-select: none;
    z-index: 4;

    transform: translateY(110%);

    transition: transform 150ms cubic-bezier(0.34, 0.9, 0.58, 1), background-color 300ms 120ms ease-out,
        border-top 150ms 150ms ease-out;

    &--shown {
        pointer-events: auto;

        background-color: hsla(246, 25%, 8%, 0.47);
        border-top: 0px solid rgb(164, 187, 242);

        transform: translateY(0px);
    }
}

.setting {
    position: fixed;
    inset: var(--top, 0) 0 var(--bottom, 0) auto;

    max-width: 100vw;

    display: flex;

    z-index: 6;

    pointer-events: none;
    user-select: none;

    &__navigator {
        display: flex;
        flex-direction: column;
        place-items: center;
        place-content: center;

        height: 100%;
        min-width: 60px;

        padding: 0 3px;

        z-index: 2;

        transform: translateX(100%);

        transition: transform 200ms ease-out;

        &__id {
            display: flex;
            align-items: center;
            justify-content: flex-end;

            margin-block-start: 2.5px;
            margin-block-end: 2.5px;

            border-radius: 3px;

            background-color: var(--setting-id-bg);
            color: var(--setting-color);

            overflow: hidden;

            user-select: none;

            transition: background-color 150ms ease-out, transform 200ms ease-out;

            &:active {
                transform: scale(0.95);
            }

            &.active {
                position: relative;

                color: var(--setting-color-a);

                &:after {
                    content: "";
                    position: absolute;
                    left: -2px;
                    top: 0;
                    bottom: 0;

                    width: 6px;

                    background-color: var(--setting-id-b);
                }
            }
        }

        &__icon {
            min-width: 54px;
            height: 50px;

            font-size: 1.22em;
        }

        &__t {
            width: 0;

            text-align: right;
            font-size: 15px;
            font-family: var(--font-secondary);

            opacity: 0;

            transition: all 400ms 0ms cubic-bezier(0.33, 1, 0.68, 1), opacity 100ms ease-out;
        }
    }

    &__content {
        width: var(--setting-content-width);
        height: 100%;
        background-color: var(--setting-content-bg);

        transform: translateX(calc(100% + 185px));

        transition: transform 350ms ease-out;

        z-index: 1;
    }

    &--show {
        pointer-events: auto;
        user-select: auto;

        .setting {
            &__content,
            &__navigator {
                transform: translateX(0);
            }
        }
    }
}

@media (hover: hover) {
    .nav__link:hover {
        background-color: var(--nav-link-bg-hover, #ebebeb);
    }

    .nav__logo:hover {
        background-color: var(--nav-link-bg-hover, #ebebeb);
    }

    .nav__subwindow:hover {
        filter: brightness(1.05);
    }

    .setting__navigator:hover {
        .setting__navigator__t {
            width: 125px;
            padding-inline-end: 0.5em;

            opacity: 1;

            transition: all 400ms 800ms cubic-bezier(0.33, 1, 0.68, 1), opacity 150ms 1000ms ease-out;
        }
    }

    .setting__navigator__id:hover {
        background-color: var(--setting-id-bg-hover);
    }
}

@media (max-width: 540px) {
    .nav {
        .nav__component {
            .nav__logo {
                &__title {
                    display: none;
                }
            }

            .nav__subwindow {
                &__text {
                    display: none;
                }
            }
        }
    }
}

@media (max-width: 450px) {
    .nav .nav__logo {
        display: none;
    }
}

body {
    --setting-content-width: 380px;
    --setting-content-bg: rgba(241, 243, 245, 0.85);
    --setting-id-bg: white;
    --setting-id-bg-hover: hsl(0, 0%, 90%);
    --setting-color: hsl(0, 0%, 55%);
    --setting-color-a: black;
    --setting-id-b: #2e81df;
}

body[data-theme="dark"],
body[theme="dark"] {
    --nav-bg: #212121;
    --nav-hover-shadow: rgba(16, 16, 16, 90%);

    --nav-logo-title-clr: white;

    --nav-component-bg: #212121;
    --nav-component-hover-bg: #313131;

    --nav-link-bg: var(--color-blue);
    --nav-link-bg-hover: hsl(0, 0%, 25%);

    --nav-btn-clr: hsl(0, 0%, 90%);

    --nav-indicator-bg: rgba(255, 255, 255);

    .nav__link[aria-current="page"],
    .nav__link[data-current="page"],
    .nav__link--active {
        color: white;
    }

    --setting-content-bg: hsla(0, 0%, 11%, 0.7);
    --setting-id-bg: hsl(0, 0%, 12%);
    --setting-id-bg-hover: hsl(0, 0%, 20%);
    --setting-color: rgb(178, 176, 176);
    --setting-color-a: white;
    --setting-id-b: #379de1;
}
